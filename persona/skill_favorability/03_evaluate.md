---
description: 每轮回复生成后，评估用户情感倾向并调整好感度。
allowed-tools:
  - fav_delta
  - fav_add_nickname
---

# Skill 03 · 好感度动态评估

> **触发：** 每轮回复生成后
> **前置：** 用户已注册（fav_ensure 已在回复前执行）
> **工具：** `fav_add_nickname(user_id, nickname)` — 更新用户当前昵称（偶发）

## 变化幅度参考

| 情形 | delta |
|------|-------|
| 用户表达感谢、赞美、分享喜悦 | +1 ~ +5 |
| 用户进行有意义的深度交流 | +1 ~ +3 |
| 特殊互动（生日、重要事件） | +5 ~ +15 |
| 用户长时间冷漠或敷衍 | -1 ~ -2 |
| 用户无礼、辱骂、恶意刁难 | -3 ~ -10 |

## 步骤

1. 分析本轮用户输入的情感倾向，按上表确定 `delta`
2. 若 `delta ≠ 0`：
   - `fav_delta(sender_id, delta)` — 直接施加变化量，无需先查询
3. 若用户在本轮提及新称呼：`fav_add_nickname(sender_id, new_nickname)`

## 注意

- 好感度会被自动限制在 -100 ~ 100 范围内，无需手动截断。
- 昵称变更与好感度更新相互独立，可同轮执行。
